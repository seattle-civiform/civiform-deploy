#! /usr/bin/env bash

# DOC: Run the browser test suite in Docker against the staging environment.
docker pull civiform/civiform-browser-test:latest

docker run \
  -e BASE_URL="https://staging.seattle.civiform.com" \
  -e TEST_USER_AUTH_STRATEGY="seattle-staging" \
  -e TEST_USER_LOGIN="${TEST_USER_LOGIN}" \
  -e TEST_USER_PASSWORD="${TEST_USER_PASSWORD}" \
  -e TEST_USER_DISPLAY_NAME="TEST, UATAPP" \
  -e TEST_CIVIC_ENTITY_SHORT_NAME="Seattle" \
  -e DISABLE_SCREENSHOTS=true \
  civiform/civiform-browser-test:latest \
  -c "yarn install && yarn probe"
